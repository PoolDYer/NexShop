# Script para ejecutar NexShop
# Uso: .\ejecutar-nexshop.ps1

Write-Host ""
Write-Host "?????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "?      INICIANDO APLICACIÓN NEXSHOP                     ?" -ForegroundColor Cyan
Write-Host "?????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

$projectPath = "E:\Proyectos Visual\NexShop\NexShop.Web"

# Verificar que existe el proyecto
if (-not (Test-Path $projectPath)) {
    Write-Host "? No se encontró el proyecto en: $projectPath" -ForegroundColor Red
    exit
}

# Cambiar a directorio del proyecto
Set-Location $projectPath

Write-Host "?? Directorio: $projectPath" -ForegroundColor Green
Write-Host ""

# Mostrar accesos rápidos
Write-Host "?? Accesos rápidos:" -ForegroundColor Yellow
Write-Host "   ?? Home:       http://localhost:5217" -ForegroundColor Cyan
Write-Host "   ?? Login:      http://localhost:5217/Identity/Account/Login" -ForegroundColor Cyan
Write-Host "   ?? Registro:   http://localhost:5217/Identity/Account/Register" -ForegroundColor Cyan
Write-Host "   ?? Categorías: http://localhost:5217/Categorias" -ForegroundColor Cyan
Write-Host "   ???  Productos:  http://localhost:5217/Productos" -ForegroundColor Cyan
Write-Host ""

Write-Host "?? Credenciales de prueba:" -ForegroundColor Yellow
Write-Host "   Admin: admin@nexshop.com / Admin@123456" -ForegroundColor Cyan
Write-Host ""

Write-Host "??  Nota: Presiona Ctrl+C para detener la aplicación" -ForegroundColor Yellow
Write-Host ""

# Limpiar compilaciones previas
Write-Host "?? Limpiando compilaciones anteriores..." -ForegroundColor Yellow
dotnet clean -q 2>$null

# Compilar
Write-Host "?? Compilando proyecto..." -ForegroundColor Yellow
$buildResult = dotnet build -q 2>&1

if ($LASTEXITCODE -ne 0) {
    Write-Host "? Error en la compilación" -ForegroundColor Red
    Write-Host $buildResult
    exit
}

Write-Host "? Compilación exitosa" -ForegroundColor Green
Write-Host ""

# Ejecutar
Write-Host "?? Iniciando aplicación..." -ForegroundColor Green
Write-Host ""
Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

dotnet run --no-build

Write-Host ""
Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""
Write-Host "??  Aplicación detenida" -ForegroundColor Yellow

# ??? VISTA PREVIA VISUAL DEL SISTEMA

## Pantalla 1: Carrito de Compras (Existente)
```
???????????????????????????????????????????????????????????????????
? ?? CARRITO DE COMPRAS                  [Continuar Comprando]  ?
???????????????????????????????????????????????????????????????????
?                                                                   ?
?  TABLA DE PRODUCTOS:                    RESUMEN DE COMPRA        ?
? ??????????????????????????????         ???????????????????????? ?
? ? Producto | Precio | Qty | $  ?       ? Resumen de Compra  ? ?
? ??????????????????????????????         ???????????????????????? ?
? ? Laptop | $225.00 | 2  | $450?       ? Subtotal: $450.00   ? ?
? ? Mouse  | $25.00  | 1  | $25 ?       ? Impuesto: $72.00    ? ?
? ??????????????????????????????       ? ?????????????????????? ?
? ? Aplicar Qty ? ? ? ? Eliminar ?     ? Total: $522.00      ? ?
? ?             ?   ?            ?       ?                     ? ?
? ? Tablet | $150.00| 1 | $150  ?       ? [?? PROCEDER PAGO]  ? ?
? ?             ?   ? Eliminar ?       ? [??? Vaciar Carrito]  ? ?
? ??????????????????????????????       ???????????????????????? ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
                                ? Usuario hace click en "PROCEDER AL PAGO"
```

---

## Pantalla 2: Formulario de Pago (NUEVA - Checkout)
```
???????????????????????????????????????????????????????????????????
? ?? INFORMACIÓN DE PAGO                                          ?
???????????????????????????????????????????????????????????????????
?                                                                  ?
?  COLUMNA IZQUIERDA (Formulario)      COLUMNA DERECHA (Resumen)  ?
? ???????????????????????????????????? ????????????????????????????
? ? ?? DIRECCIÓN DE ENTREGA          ? ? ?? RESUMEN DE COMPRA    ??
? ? ??????????????????????????????   ? ????????????????????????????
? ? ? Calle Principal 123, Apt 4 ?   ? ? Artículos (3):          ??
? ? ? Ciudad, Código Postal      ?   ? ? • Laptop (2)  $450.00  ??
? ? ?                            ?   ? ? • Mouse (1)   $25.00   ??
? ? ??????????????????????????????   ? ? • Tablet (1)  $150.00  ??
? ?                                  ? ? ??????????????????????  ??
? ? ?? MÉTODO DE PAGO                ? ? Subtotal:    $625.00   ??
? ? ???????????? ????????????       ? ? Impuesto:    $100.00   ??
? ? ???Tarjeta ? ???Transf. ?       ? ? ??????????????????????  ??
? ? ?Crédito ? ? ?Bancaria  ?       ? ? Total:       $725.00   ??
? ? ???????????? ????????????       ? ????????????????????????????
? ? ???????????? ????????????       ?                             ?
? ? ???Tarjeta ? ???Billetera?       ?                             ?
? ? ?Débito    ? ?Digital   ?       ?                             ?
? ? ???????????? ????????????       ?                             ?
? ?                                  ?                             ?
? ? ?? NOTAS ADICIONALES (Opcional) ?                             ?
? ? ??????????????????????????????   ?                             ?
? ? ? Llamar antes de entregar... ?   ?                             ?
? ? ??????????????????????????????   ?                             ?
? ?                                  ?                             ?
? ? ?? Acepto términos y condiciones ?                             ?
? ?                                  ?                             ?
? ? [? VOLVER]  [?? PROCEDER PAGO]  ?                             ?
? ????????????????????????????????????                             ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
                          ? Usuario hace click en "PROCEDER AL PAGO"
                     (Se inicia procesamiento)
```

---

## Pantalla 3: Procesando Pago (Espera 2-4 segundos)
```
???????????????????????????????????????????????????????????????????
?                                                                  ?
?                                                                  ?
?                    ? Procesando tu Pago...                     ?
?                                                                  ?
?                        ?? (Spinner giratorio)                   ?
?                                                                  ?
?                  Por favor, no cierres esta página              ?
?                                                                  ?
?              ????????????????????????????????????  100%       ?
?                                                                  ?
?           ?? Estamos validando tu información de pago            ?
?                    Esto toma 2-4 segundos                       ?
?                                                                  ?
?                     ?? Tu información está protegida             ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
                   Esperando 2-4 segundos...
                   (Simulador de pago en acción)
```

---

## Pantalla 4A: Pago Exitoso ? (95% de probabilidad)
```
???????????????????????????????????????????????????????????????????
?                                                                  ?
?                       ? ¡COMPRA EXITOSA!                      ?
?                                                                  ?
?                       Tu orden ha sido                           ?
?                       procesada correctamente                   ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
?                                                                  ?
?  ????????????????????????????????????????????????????????????  ?
?  ? ?? DETALLES DE TU ORDEN                                 ?  ?
?  ????????????????????????????????????????????????????????????  ?
?  ?                                                           ?  ?
?  ?  ????????????????????    ????????????????????           ?  ?
?  ?  ?Número de Orden   ?    ?Fecha y Hora      ?           ?  ?
?  ?  ? ORD-XXXX-12345   ?    ?15/12/2024 14:30  ?           ?  ?
?  ?  ????????????????????    ????????????????????           ?  ?
?  ?                                                           ?  ?
?  ? ?? DIRECCIÓN DE ENTREGA                                 ?  ?
?  ? Calle Principal 123, Apto 4                             ?  ?
?  ? Ciudad, Código Postal                                   ?  ?
?  ?                                                           ?  ?
?  ? ?? MONTO TOTAL PAGADO: $725.00 ?                        ?  ?
?  ????????????????????????????????????????????????????????????  ?
?                                                                  ?
?  ????????????????????????????????????????????????????????????  ?
?  ? ?? PRODUCTOS COMPRADOS                                  ?  ?
?  ????????????????????????????????????????????????????????????  ?
?  ? • Laptop           2 x $225.00 =  $450.00               ?  ?
?  ? • Mouse            1 x $25.00  =  $25.00                ?  ?
?  ? • Tablet           1 x $150.00 =  $150.00               ?  ?
?  ????????????????????????????????????????????????????????????  ?
?                                                                  ?
?  ????????????????????????????????????????????????????????????  ?
?  ? ?? PRÓXIMOS PASOS                                       ?  ?
?  ????????????????????????????????????????????????????????????  ?
?  ? 1. ? Confirmación: Recibirás email en minutos           ?  ?
?  ? 2. ??  Preparación: Empezaremos a preparar tu orden      ?  ?
?  ? 3. ?? Envío: Te notificaremos cuando esté en camino     ?  ?
?  ? 4. ?? Entrega: Recibirás en la dirección indicada       ?  ?
?  ????????????????????????????????????????????????????????????  ?
?                                                                  ?
?                [MIS ÓRDENES]    [CONTINUAR COMPRANDO]          ?
?                                                                  ?
?           ? ¿Necesitas ayuda? Contáctanos                     ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
```

---

## Pantalla 4B: Pago Rechazado ? (5% de probabilidad)
```
???????????????????????????????????????????????????????????????????
?                                                                  ?
?                     ? PAGO RECHAZADO                           ?
?                                                                  ?
?            El pago fue rechazado. Por favor verifica              ?
?        tu información de pago e intenta nuevamente               ?
?                                                                  ?
?              [Volver al Carrito]   [Reintentar]                 ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
                          ?
                   Vuelve al carrito
                   Stock NO se modificó
```

---

## ?? Cambios en Base de Datos (Detrás de Escenas)

### ANTES del Pago:
```
Tabla: Productos
?????????????????????????????????????????
? ProductId ? Nombre   ? Stock ? Estado ?
?????????????????????????????????????????
? 1         ? Laptop   ? 50    ? Disponible
? 2         ? Mouse    ? 100   ? Disponible
? 3         ? Tablet   ? 30    ? Disponible
?????????????????????????????????????????

Tabla: Ordenes
(Vacía - No hay órdenes nuevas)
```

### DESPUÉS del Pago Exitoso:
```
Tabla: Productos (STOCK REDUCIDO ?)
?????????????????????????????????????????
? ProductId ? Nombre   ? Stock ? Estado ?
?????????????????????????????????????????
? 1         ? Laptop   ? 48    ? Disponible ? Redujo 2
? 2         ? Mouse    ? 99    ? Disponible ? Redujo 1
? 3         ? Tablet   ? 29    ? Disponible ? Redujo 1
?????????????????????????????????????????

Tabla: Ordenes (NUEVA ORDEN ?)
??????????????????????????????????????????????????????????????????
? OrdenId ? NumeroOrden   ? CompradorId  ? MontoTotal? Estado     ?
??????????????????????????????????????????????????????????????????
? 1       ? ORD-XXX-12345 ? user@mail.com? 725.00   ? Confirmada ?
??????????????????????????????????????????????????????????????????

Tabla: OrdenDetalles (DETALLES DE LA ORDEN ?)
???????????????????????????????????????????????????????????
? OrdenDetalId? OrdenId ? ProductoId? Cantidad ? Subtotal ?
???????????????????????????????????????????????????????????
? 1           ? 1       ? 1         ? 2        ? 450.00   ?
? 2           ? 1       ? 2         ? 1        ? 25.00    ?
? 3           ? 1       ? 3         ? 1        ? 150.00   ?
???????????????????????????????????????????????????????????
```

---

## ?? Flujo Completo Visualizado

```
START
  ?
  ??? Usuario en Carrito con 3 productos
  ?
  ??? Click "Proceder al Pago"
  ?
  ??? FORMA ABIERTA (Checkout.cshtml)
  ?   • Ingresa dirección
  ?   • Selecciona método pago
  ?   • Acepta términos
  ?
  ??? Click "Proceder al Pago"
  ?
  ??? VALIDAR DATOS (Server-side)
  ?   ? Dirección válida
  ?   ? Método seleccionado
  ?   ? Términos aceptados
  ?   ? Stock disponible
  ?
  ??? PROCESAR PAGO (PagoService)
  ?   ? Espera 2-4 segundos
  ?   
  ?   ?? 95% ÉXITO ?
  ?   ?  • Crear Orden
  ?   ?  • REDUCIR STOCK
  ?   ?  • Confirmar
  ?   ?  • Mostrar confirmación
  ?   ?
  ?   ?? 5% RECHAZO ?
  ?      • No crear orden
  ?      • Stock sin cambios
  ?      • Mostrar error
  ?      • Volver al carrito
  ?
  ??? END
```

---

## ?? Comparativa: Antes vs Después

| Aspecto | Antes | Ahora |
|---------|-------|-------|
| **Checkout** | Directo a orden | Formulario completo |
| **Pagos** | Sin simulación | Realista (95% éxito) |
| **Stock** | Manual | Automático |
| **Confirmación** | Simple | Detallada |
| **Seguridad** | Básica | Transacciones ACID |
| **UX** | Rápido pero impersonal | Completo y profesional |

---

## ?? Casos de Uso

### Caso 1: Usuario Exitoso
```
1. Agrega 2 Laptops al carrito ($450)
2. Va a checkout y rellena formulario
3. Espera 2-4 segundos
4. ? Ve confirmación con orden ORD-123
5. ?? BD: Stock de Laptop cambió de 50?48
```

### Caso 2: Usuario Rechazado (5%)
```
1. Agrega 1 Mouse al carrito ($25)
2. Va a checkout y rellena formulario
3. Espera 2-4 segundos
4. ? "Pago rechazado, intenta de nuevo"
5. ?? BD: Stock sin cambios (sigue en 100)
6. Vuelve al carrito y puede reintentar
```

### Caso 3: Stock Insuficiente
```
1. Intenta comprar 100 Laptops (stock actual: 50)
2. Click en "Proceder al Pago"
3. ?? Error: "Stock insuficiente para Laptop"
4. ?? BD: Nada cambió
5. Puede reducir cantidad e intentar de nuevo
```

---

**?? La experiencia es profesional, realista y segura.**
